{% extends "base.html" %}
{% load static %}

{% block content %}
    <div class="container">
        <div class="row">
            <div class="col">
                <h3>{{ blogpost.title }}</h3>
                <small>by <strong>{{ blogpost.author }}</strong> posted on {{ blogpost.date_created }}</small>
                <br>
                <br>
                {% if blogpost.header_image %}
                <img height=360 width=360 src="{{ blogpost.header_image.url }}" alt="Blog image">
                {% endif %}
                <p>{{ blogpost.body }}</p>
                {% if request.user.is_superuser %}
                <a href="{% url 'edit_blog_post' blogpost.pk %}" class="btn btn-dark">Edit blog post</a>
                <a href="{% url 'delete_blog_post' blogpost.pk %}" class="btn btn-danger">Delete blog post</a>
                {% endif %}
            </div>
        </div>
        <div class="row">
            <div class="col-sm-2">
                <form action="{% url 'like_blog_post' blogpost.pk %}" method="POST">
                    {% csrf_token%}
                    <button type="submit" name="blogpost_id" class="btn btn-info" value="{{ blogpost.id }}">{% if request.user in blogpost.likes.all %}Unlike{% else%}Like{% endif %}</button>
                </form>
            </div>
            <div class="col-sm-10">
                <p>{{ blogpost.likes.count}} likes</p>
            </div>
        </div>
    </div>
{% endblock %}
